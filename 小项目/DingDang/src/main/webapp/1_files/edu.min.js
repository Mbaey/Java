var xhr,editIndex=void 0,ntlist=void 0,pilist=void 0,gtlist=void 0,weektime=[];Sorter=function(a,b){return a?b?a.localeCompare(b):1:-1};NSorter=function(a,b){return a?b?a>b?1:-1:1:-1};$(function(){if(!store.enabled)return $.messager.alert("\u63d0\u793a","\u4f60\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u7248\u672c\u592a\u4f4e\uff0c\u7cfb\u7edf\u4e0d\u652f\u6301\uff01","warning"),$("#btnLogin").linkbutton("disable"),!1;String.prototype.trim=function(){return this.replace(/[ ]/g,"")};String.prototype.len=function(){for(var a=0,b=0;b<this.length;b++)0!=(this.charCodeAt(b)&65280)&&a++,a++;return a};$.extend($.fn.validatebox.defaults.rules,{equals_pwd:{validator:function(a,b){return a==$(b[0]).val()},message:"\u8f93\u5165\u7684\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"}});$.extend($.fn.validatebox.defaults.rules,{equals_valid:{validator:function(a,b){return a.toUpperCase()==$(b[0]).val().trim()},message:"\u9a8c\u8bc1\u7801\u4e0d\u4e00\u81f4\uff01"}});$("#uType input").click(function(){"E"==$(this).val()?$("#uCode").textbox({prompt:"\u4ee3\u7801"}):$("#uCode").textbox({prompt:"\u5b66\u53f7"});$("input",$("#uCode").next("span")).blur(function(){$(uCode).textbox("setValue",$(uCode).textbox("getValue").toUpperCase())});$("#uCode").textbox("textbox").keydown(function(a){13==a.keyCode&&(a.preventDefault(),$("#uPassword").textbox("textbox").focus())})});$("input",$("#uCode").next("span")).blur(function(){$(uCode).textbox("setValue",$(uCode).textbox("getValue").toUpperCase())});$("#uCode").textbox("textbox").keydown(function(a){13==a.keyCode&&(a.preventDefault(),$("#uPassword").textbox("textbox").focus())});$("#uPassword").textbox("textbox").keydown(function(a){13==a.keyCode&&(a.preventDefault(),$("#uValidcode").textbox("textbox").focus())});$("#uValidcode").textbox("textbox").keydown(function(a){13==a.keyCode&&(a.preventDefault(),Login())});ALogin()});function GetOnline(){$.get("online.do").done(function(a){$("#uMsg").html("\u5728\u7ebf\u4eba\u6570\uff1a\x3cb\x3e"+a+"\x3c/b\x3e")})}function MenuAction(a){"0"==sessionStorage.getItem("$enable")&&"stEval"!=a.id?$.messager.alert("\u63d0\u793a","\u4f60\u7684\u8bc4\u6559\u672a\u5b8c\u6210\uff0c\u8bf7\u5148\u8bc4\u6559\uff01","info"):a.id&&$("#subject").text()!=a.text&&("chgpwd"==a.id?($("#pMsg").html("\x26nbsp"),$("#dlgChgPwd.easyui-textbox").textbox("clear"),$("#dlgChgPwd").dialog("open")):($("#maincontent").panel("options").href="",$("#maincontent").panel("clear"),0<$("#mMenu").length&&$("#mMenu").menu("destroy"),LoadPanel(a.id,$("#maincontent"),a.id+"@").done(function(){eval(a.id+"()");$("#subject").html(a.text)})))}function MLogin(){if($("#uCode").textbox("isValid"))if($("#uPassword").textbox("isValid"))if($("#uValidcode").textbox("isValid")){var a=$("#uType input[name\x3d'usertype']:checked").val();$.post("mlogin.do",{utype:a,ucode:$("#uCode").val(),pwd:$("#uPassword").val(),rember:$("#uRember").is(":checked")}).done(function(a){a=strDec(a,k1,k2,k3);a=JSON.parse(a);a.success?(LoginDlgClose(),LoginOK(a)):($("#uMsg").html(a.msg),$("#uCode").textbox("textbox").focus(),CreateCode())}).fail(function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error")})}else $("#uMsg").html("\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e\uff01"),$("#uValidcode").textbox("textbox").focus();else $("#uMsg").html("\u8bf7\u8f93\u5165"+$("#uPassword").textbox("options").prompt+"\uff01"),CreateCode(),$("#uPassword").textbox("textbox").focus();else $("#uMsg").html("\u8bf7\u8f93\u5165"+$("#uCode").textbox("options").prompt+"\uff01"),CreateCode(),$("#uCode").textbox("textbox").focus()}function ALogin(){$.post("alogin.do").done(function(a){a=strDec(a,k1,k2,k3);a=JSON.parse(a);a.success&&LoginOK(a)}).fail(function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error")})}function LoginOK(a){GetSysInfo().done(function(){$("#btnLogin").linkbutton("disable");$("#btnLogout").linkbutton("enable");GetMenu();"E"==a.msg?$("#currUser").html("\u6559\u5de5\uff1a"+a.data.name):($("#currUser").html("\u5b66\u751f\uff1a"+a.data.name),sessionStorage.setItem("$spid",a.data.spid),sessionStorage.setItem("$clid",a.data.clid),sessionStorage.setItem("$grade",a.data.grade),sessionStorage.setItem("$fxsp",a.data.fxsp),sessionStorage.setItem("$enable",a.data.enable));sessionStorage.setItem("$dpid",a.data.dpid);k1=a.data.pa;k2=a.data.pb;k3=a.data.pc})}function Logout(){Confirm("\u662f\u5426\u6ce8\u9500\uff1f").done(function(){$.post("logout.do").done(function(a){a=JSON.parse(a);a.success?($("#btnLogin").linkbutton("enable"),$("#btnLogout").linkbutton("disable"),$("#menu").remove(),$("#mFunc").empty(),$("#maincontent").panel({href:"home.do",onLoad:$.noop}),$("#subject").html("\u9996\u9875"),$("#currUser").html("\u672a\u767b\u5f55"),k1="1",k2="2",k3="3",$.messager.alert("\u63d0\u793a",a.msg,"info")):$.messager.alert("\u63d0\u793a","\u6ce8\u9500\u5931\u8d25\uff01","error")}).fail(function(a){$.messager.alert("\u63d0\u793a","\u6ce8\u9500\u5931\u8d25\uff01","error")})})}function LoginDlgOpen(){$("#uMsg").html("\x26nbsp");$("#dlgLogin .easyui-textbox").textbox("clear");CreateCode();$("#dlgLogin").dialog("open")}function LoginDlgClose(){$("#dlgLogin").dialog("close")}function PwdDlgClose(){$("#dlgChgPwd").dialog("close")}function ChangePwd(){$("#oldpwd").textbox("isValid")&&$("#newpwd").textbox("isValid")&&$("#repwd").textbox("isValid")?$("#newpwd").val()!=$("#repwd").val()?$("#pMsg").html("\u65b0\u5bc6\u7801\u4e0e\u786e\u8ba4\u5bc6\u7801\u4e0d\u7b26\uff01"):$.post("changpwd.do",{oldpwd:$("#oldpwd").val(),newpwd:$("#newpwd").val()}).done(function(a){a=JSON.parse(a);a.success?(PwdDlgClose(),$.messager.alert("\u63d0\u793a","\u5bc6\u7801\u66f4\u6539\u6210\u529f\uff01","info")):$("#pMsg").html(a.msg)}):$("#pMsg").html("3\u4e2a\u5bc6\u7801\u90fd\u8981\u8f93\u5165\uff01")}function CreateCode(){for(var a="",b=[1,2,3,4,5,6,7,9,"A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"],c=0;4>c;c++)a+=b[Math.floor(32*Math.random())]+" ";$("#uValidcode").textbox("clear");$("#uCheckcode").textbox("setValue",a)}function RefteshSysInfo(){sessionStorage.clear();$.get("sys/refreshinfo.do",function(a){a=JSON.parse(a);$.each(a,function(a,c){sessionStorage.setItem(a,c)});sessionStorage.setItem("expire",(new Date).getTime())});store.clear()}function GetMenu(){var a=$.Deferred();$.get("getmenu.do").done(function(b){$("#mFunc").html(b);$.parser.parse("#mFunc");a.resolve()}).fail(function(b){$.messager.alert("\u9519\u8bef",b.responseText,"error");a.reject()});return a.promise()}function GetSysInfo(){sessionStorage.clear();var a=$.Deferred();$.get("sys/info.do").done(function(b){b=JSON.parse(b);$.each(b,function(a,b){sessionStorage.setItem(a,b)});sessionStorage.setItem("expire",(new Date).getTime());a.resolve()}).fail(function(b){$.messager.alert("\u9519\u8bef",b.responseText,"error");a.reject()});return a.promise()}function getSessionStorage(a){var b=sessionStorage.getItem("expire");if(!b||108E5<(new Date).getTime()-b)GetSysInfo().done(function(){return sessionStorage.getItem(a)});else return sessionStorage.getItem(a)}function Confirm(a){var b=$.Deferred();$.messager.confirm("\u786e\u8ba4",a,function(a){a?b.resolve():b.reject()});return b.promise()}function ShowFile(a){$("#rptFrame").attr("src","file/"+a);$("#winpdf").window("open")}var LoadPanel=function(a,b,c){var d=$.Deferred(),f=getSessionStorage(a),h=store.get(a);if(h&&h.md5==f){if(c)if(sessionStorage.getItem(c)){var p=h.content.indexOf("\x3cscript");b.panel({content:h.content.slice(0,p)+"\x3c/body\x3e\x3c/html\x3e"})}else b.panel({content:h.content}),sessionStorage.setItem(c,"1");else b.panel({content:h.content});$.parser.parse(b);d.resolve()}else $.ajax({dataType:"text",url:"sys/entity.do",data:{objid:a},success:function(g){store.set(a,{md5:f,content:g});b.panel({content:g});c&&sessionStorage.setItem(c,"1");$.parser.parse(b);d.resolve()},error:function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error");d.reject()}});return d.promise()};function LoadGrid(a,b,c,d){xhr&&4!=xhr.readyState&&0!=xhr.readyState?xhr.abort():(a.datagrid("loading"),xhr=$.ajax({type:"POST",dataType:"json",url:a.data("web").url+"view.do",data:b}).done(function(f){a.datagrid("loaded");a.datagrid("loadData",f);a.data("web").params=b;xhr&&c&&c(d)}).fail(function(b,c){a.datagrid("loaded");"abort"!=c&&$.messager.alert("\u9519\u8bef",b.responseText,"error")}))}function LoadTree(a,b,c){var d=getSessionStorage(a),f=store.get(a);f&&f.md5==d?(b.tree("loadData",f.content),f=b.tree("getRoot"),b.tree("expand",f.target),c&&c()):b.tree({url:"sys/"+a+".do",onLoadSuccess:function(f,p){store.set(a,{md5:d,content:p});var g=b.tree("getRoot");b.tree("expand",g.target);c&&c()},onLoadError:function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error")}})}function LoadComboTree(a,b,c){var d=getSessionStorage(a),f=store.get(a),h=b.combotree("tree");f&&f.md5==d?(b.combotree("loadData",f.content),f=h.tree("getRoot"),h.tree("expand",f.target),"crtree"==a?b.combotree("setValue",1):b.combotree("setValue","U0"),c&&c()):b.combotree({url:"sys/"+a+".do",onLoadSuccess:function(f,g){store.set(a,{md5:d,content:g});var p=h.tree("getRoot");h.tree("expand",p.target);"crtree"==a?b.combotree("setValue",1):b.combotree("setValue","U0");c&&c()},onLoadError:function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error")}})}function LoadCombobox(a,b,c){var d,f,h,p;h="termlist"==a?"terminx":"gradeinx";p=sessionStorage.getItem(h);d=getSessionStorage(a);(f=store.get(a))&&f.md5==d?(b.combobox("loadData",f.content),p?b.combobox("select",p):sessionStorage.setItem(h,b.combobox("getValue")),c&&c()):$.ajax({dataType:"json",url:"sys/"+a+".do"}).done(function(f){store.set(a,{md5:d,content:f});b.combobox("loadData",f);p?b.combobox("select",p):sessionStorage.setItem(h,b.combobox("getValue"));c&&c()}).fail(function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error")})}function ClearGrid(a){$("#"+a).datagrid("loadData",{total:0,rows:[],footer:[]})}function Close(){Confirm("\u662f\u5426\u5173\u95ed\uff1f").done(function(){$("#maincontent").panel({href:"home.do",onLoad:$.noop});$("#subject").html("\u9996\u9875");return!0});return!1}function GetUser(a,b){var c="E",d=0;b.ST_ID?(c="S",d=b.ST_ID):d=b.EM_ID;$.post("getuser.do",{utype:c,uid:d}).done(function(a){a=JSON.parse(a);a.success?LoginOK(a):ShowMsg("\u5931\u8d25\u4e86\uff01")}).fail(function(a){$.messager.alert("\u9519\u8bef",a.responseText,"error")})}function LoadDataLink(){ntlist||$.get("sys/ntDataLink.do").done(function(a){ntlist=JSON.parse(a)});pilist||$.get("sys/piDataLink.do").done(function(a){pilist=JSON.parse(a)});gtlist||$.get("sys/gtDataLink.do").done(function(a){gtlist=JSON.parse(a)})}function GetDataLink(a,b){var c=ntlist;switch(a){case "pi":c=pilist;break;case "gt":c=gtlist}for(var d=0,f=c.length;d<f;d++)if(c[d].value==b)return c[d].text}function wordCount(a,b,c){if(!a)return 0;for(var d=a.length,f=0,h=0;f<d;){for(;f<d&&a.charAt(f)!=b;)f++;for(;f<d&&a.charAt(f)!=c;)f++;f<d&&h++}return h}function wordPosition(a,b,c,d){if(!b)return-1;for(var f=-1,h=b.length,p=0,g=0;g<h&&p!=a;){for(;g<h&&b.charAt(g)!=c;)g++;for(p==a-1&&(f=g);g<h&&b.charAt(g)!=d;)g++;g<h?p++:f=-1}return f}function extractWord(a,b,c,d){a=wordPosition(a,b,c,d);if(-1==a)return"";var f=a;slen=b.length;b.charAt(f)==c&&(a++,f++);for(;f<slen&&b.charAt(f)!=d;)f++;return b.substring(a,f)}function FilterMsg(a){$.messager.show({msg:a,showType:"fade",width:160,height:52,timeout:2E3,style:{left:10,right:"",bottom:""}})}function ShowMsg(a){$.messager.show({title:"\u63d0\u793a",msg:a,showType:"show"})}function Export(a){if(a){a=$("#"+sessionStorage.getItem("currgrid"));var b=a.data("web").params;if("@"!=b&&0!=a.datagrid("getRows").length){var c="",d;for(d in b)c+="\x26"+d+"\x3d"+escape(b[d]);0>=$("#downloadcsv").length&&$("body").append('\x3ciframe id\x3d"downloadcsv" style\x3d"display:none"\x3e\x3c/iframe\x3e');$("#downloadcsv").attr("src",a.data("web").url+"export.do?sort\x3d"+a.datagrid("options").sortName+"\x26order\x3d"+a.datagrid("options").sortOrder+c)}}}function CuTableStyler(a,b,c){return"background-color:#F0F0F0"}function setCookie(a,b,c){var d=new Date;d.setDate(d.getDate()+c);document.cookie=a+"\x3d"+b+";expires\x3d"+d}function getCookie(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("\x3d");if(d[0]==a)return d[1]}return""}function removeCookie(a){setCookie(a,1,-1)}var k1="1",k2="2",k3="3";function strEnc(a,b,c,d){var f=a.length,h="",p,g,r,t,v,u;null!=b&&""!=b&&(p=getKeyBytes(b),t=p.length);null!=c&&""!=c&&(g=getKeyBytes(c),v=g.length);null!=d&&""!=d&&(r=getKeyBytes(d),u=r.length);if(0<f)if(4>f){var h=strToBt(a),l;if(null!=b&&""!=b&&null!=c&&""!=c&&null!=d&&""!=d){var e;l=h;for(e=0;e<t;e++)l=enc(l,p[e]);for(e=0;e<v;e++)l=enc(l,g[e]);for(e=0;e<u;e++)l=enc(l,r[e])}else if(null!=b&&""!=b&&null!=c&&""!=c){l=h;for(e=0;e<t;e++)l=enc(l,p[e]);for(e=0;e<v;e++)l=enc(l,g[e])}else if(null!=b&&""!=b)for(l=h,e=0;e<t;e++)l=enc(l,p[e]);h=bt64ToHex(l)}else{var x=parseInt(f/4),w=f%4,q;for(q=0;q<x;q++){e=a.substring(4*q+0,4*q+4);e=strToBt(e);if(null!=b&&""!=b&&null!=c&&""!=c&&null!=d&&""!=d){l=e;for(e=0;e<t;e++)l=enc(l,p[e]);for(e=0;e<v;e++)l=enc(l,g[e]);for(e=0;e<u;e++)l=enc(l,r[e])}else if(null!=b&&""!=b&&null!=c&&""!=c){l=e;for(e=0;e<t;e++)l=enc(l,p[e]);for(e=0;e<v;e++)l=enc(l,g[e])}else if(null!=b&&""!=b)for(l=e,e=0;e<t;e++)l=enc(l,p[e]);h+=bt64ToHex(l)}if(0<w){a=a.substring(4*x+0,f);e=strToBt(a);if(null!=b&&""!=b&&null!=c&&""!=c&&null!=d&&""!=d){l=e;for(e=0;e<t;e++)l=enc(l,p[e]);for(e=0;e<v;e++)l=enc(l,g[e]);for(e=0;e<u;e++)l=enc(l,r[e])}else if(null!=b&&""!=b&&null!=c&&""!=c){l=e;for(e=0;e<t;e++)l=enc(l,p[e]);for(e=0;e<v;e++)l=enc(l,g[e])}else if(null!=b&&""!=b)for(l=e,e=0;e<t;e++)l=enc(l,p[e]);h+=bt64ToHex(l)}}return h}function strDec(a,b,c,d){var f=a.length,h="",p,g,r,t,v,u;null!=b&&""!=b&&(p=getKeyBytes(b),t=p.length);null!=c&&""!=c&&(g=getKeyBytes(c),v=g.length);null!=d&&""!=d&&(r=getKeyBytes(d),u=r.length);var f=parseInt(f/16),l;for(l=0;l<f;l++){var e=a.substring(16*l+0,16*l+16),e=hexToBt64(e),x=Array(64),w;for(w=0;64>w;w++)x[w]=parseInt(e.substring(w,w+1));var q;if(null!=b&&""!=b&&null!=c&&""!=c&&null!=d&&""!=d){q=x;for(e=u-1;0<=e;e--)q=dec(q,r[e]);for(e=v-1;0<=e;e--)q=dec(q,g[e]);for(e=t-1;0<=e;e--)q=dec(q,p[e])}else if(null!=b&&""!=b&&null!=c&&""!=c){q=x;for(e=v-1;0<=e;e--)q=dec(q,g[e]);for(e=t-1;0<=e;e--)q=dec(q,p[e])}else if(null!=b&&""!=b)for(q=x,e=t-1;0<=e;e--)q=dec(q,p[e]);h+=byteToString(q)}return h}function getKeyBytes(a){var b=[],c=a.length,d=parseInt(c/4),f=c%4,h;for(h=0;h<d;h++)b[h]=strToBt(a.substring(4*h+0,4*h+4));0<f&&(b[h]=strToBt(a.substring(4*h+0,c)));return b}function strToBt(a){var b=a.length,c=Array(64);if(4>b){var d,f;for(d=0;d<b;d++){var h=a.charCodeAt(d);for(f=0;16>f;f++){var p=1,g;for(g=15;g>f;g--)p*=2;c[16*d+f]=parseInt(h/p)%2}}for(a=b;4>a;a++)for(b=h=0;16>b;b++){p=1;for(g=15;g>b;g--)p*=2;c[16*a+b]=parseInt(h/p)%2}}else for(d=0;4>d;d++)for(h=a.charCodeAt(d),f=0;16>f;f++){p=1;for(g=15;g>f;g--)p*=2;c[16*d+f]=parseInt(h/p)%2}return c}function bt4ToHex(a){var b;switch(a){case "0000":b="0";break;case "0001":b="1";break;case "0010":b="2";break;case "0011":b="3";break;case "0100":b="4";break;case "0101":b="5";break;case "0110":b="6";break;case "0111":b="7";break;case "1000":b="8";break;case "1001":b="9";break;case "1010":b="A";break;case "1011":b="B";break;case "1100":b="C";break;case "1101":b="D";break;case "1110":b="E";break;case "1111":b="F"}return b}function hexToBt4(a){var b;switch(a){case "0":b="0000";break;case "1":b="0001";break;case "2":b="0010";break;case "3":b="0011";break;case "4":b="0100";break;case "5":b="0101";break;case "6":b="0110";break;case "7":b="0111";break;case "8":b="1000";break;case "9":b="1001";break;case "A":b="1010";break;case "B":b="1011";break;case "C":b="1100";break;case "D":b="1101";break;case "E":b="1110";break;case "F":b="1111"}return b}function byteToString(a){var b="";for(i=0;4>i;i++){var c=0;for(j=0;16>j;j++){var d=1;for(m=15;m>j;m--)d*=2;c+=a[16*i+j]*d}0!=c&&(b+=String.fromCharCode(c))}return b}function bt64ToHex(a){var b="";for(i=0;16>i;i++){var c="";for(j=0;4>j;j++)c+=a[4*i+j];b+=bt4ToHex(c)}return b}function hexToBt64(a){var b="";for(i=0;16>i;i++)b+=hexToBt4(a.substring(i,i+1));return b}function enc(a,b){var c=generateKeys(b),d=initPermute(a),f=Array(32),h=Array(32),p=Array(32),g;for(g=0;32>g;g++)f[g]=d[g],h[g]=d[32+g];for(d=0;16>d;d++){for(g=0;32>g;g++)p[g]=f[g],f[g]=h[g];var r=Array(48);for(g=0;48>g;g++)r[g]=c[d][g];r=xor(pPermute(sBoxPermute(xor(expandPermute(h),r))),p);for(g=0;32>g;g++)h[g]=r[g]}c=Array(64);for(d=0;32>d;d++)c[d]=h[d],c[32+d]=f[d];return finallyPermute(c)}function dec(a,b){var c=generateKeys(b),d=initPermute(a),f=Array(32),h=Array(32),p=Array(32),g;for(g=0;32>g;g++)f[g]=d[g],h[g]=d[32+g];for(d=15;0<=d;d--){for(g=0;32>g;g++)p[g]=f[g],f[g]=h[g];var r=Array(48);for(g=0;48>g;g++)r[g]=c[d][g];r=xor(pPermute(sBoxPermute(xor(expandPermute(h),r))),p);for(g=0;32>g;g++)h[g]=r[g]}c=Array(64);for(d=0;32>d;d++)c[d]=h[d],c[32+d]=f[d];return finallyPermute(c)}function initPermute(a){var b=Array(64);i=0;m=1;for(n=0;4>i;i++,m+=2,n+=2)for(j=7,k=0;0<=j;j--,k++)b[8*i+k]=a[8*j+m],b[8*i+k+32]=a[8*j+n];return b}function expandPermute(a){var b=Array(48);for(i=0;8>i;i++)b[6*i+0]=0==i?a[31]:a[4*i-1],b[6*i+1]=a[4*i+0],b[6*i+2]=a[4*i+1],b[6*i+3]=a[4*i+2],b[6*i+4]=a[4*i+3],b[6*i+5]=7==i?a[0]:a[4*i+4];return b}function xor(a,b){var c=Array(a.length);for(i=0;i<a.length;i++)c[i]=a[i]^b[i];return c}function sBoxPermute(a){var b=Array(32),c="",d=[[14,4,13,1,2,15,11,8,3,10,6,12,5,9,0,7],[0,15,7,4,14,2,13,1,10,6,12,11,9,5,3,8],[4,1,14,8,13,6,2,11,15,12,9,7,3,10,5,0],[15,12,8,2,4,9,1,7,5,11,3,14,10,0,6,13]],f=[[15,1,8,14,6,11,3,4,9,7,2,13,12,0,5,10],[3,13,4,7,15,2,8,14,12,0,1,10,6,9,11,5],[0,14,7,11,10,4,13,1,5,8,12,6,9,3,2,15],[13,8,10,1,3,15,4,2,11,6,7,12,0,5,14,9]],h=[[10,0,9,14,6,3,15,5,1,13,12,7,11,4,2,8],[13,7,0,9,3,4,6,10,2,8,5,14,12,11,15,1],[13,6,4,9,8,15,3,0,11,1,2,12,5,10,14,7],[1,10,13,0,6,9,8,7,4,15,14,3,11,5,2,12]],p=[[7,13,14,3,0,6,9,10,1,2,8,5,11,12,4,15],[13,8,11,5,6,15,0,3,4,7,2,12,1,10,14,9],[10,6,9,0,12,11,7,13,15,1,3,14,5,2,8,4],[3,15,0,6,10,1,13,8,9,4,5,11,12,7,2,14]],g=[[2,12,4,1,7,10,11,6,8,5,3,15,13,0,14,9],[14,11,2,12,4,7,13,1,5,0,15,10,3,9,8,6],[4,2,1,11,10,13,7,8,15,9,12,5,6,3,0,14],[11,8,12,7,1,14,2,13,6,15,0,9,10,4,5,3]],r=[[12,1,10,15,9,2,6,8,0,13,3,4,14,7,5,11],[10,15,4,2,7,12,9,5,6,1,13,14,0,11,3,8],[9,14,15,5,2,8,12,3,7,0,4,10,1,13,11,6],[4,3,2,12,9,5,15,10,11,14,1,7,6,0,8,13]],t=[[4,11,2,14,15,0,8,13,3,12,9,7,5,10,6,1],[13,0,11,7,4,9,1,10,14,3,5,12,2,15,8,6],[1,4,11,13,12,3,7,14,10,15,6,8,0,5,9,2],[6,11,13,8,1,4,10,7,9,5,0,15,14,2,3,12]],v=[[13,2,8,4,6,15,11,1,10,9,3,14,5,0,12,7],[1,15,13,8,10,3,7,4,12,5,6,11,0,14,9,2],[7,11,4,1,9,12,14,2,0,6,10,13,15,3,5,8],[2,1,14,7,4,10,8,13,15,12,9,0,3,5,6,11]];for(m=0;8>m;m++){var u,l;u=2*a[6*m+0]+a[6*m+5];l=8*a[6*m+1]+4*a[6*m+2]+2*a[6*m+3]+a[6*m+4];switch(m){case 0:c=getBoxBinary(d[u][l]);break;case 1:c=getBoxBinary(f[u][l]);break;case 2:c=getBoxBinary(h[u][l]);break;case 3:c=getBoxBinary(p[u][l]);break;case 4:c=getBoxBinary(g[u][l]);break;case 5:c=getBoxBinary(r[u][l]);break;case 6:c=getBoxBinary(t[u][l]);break;case 7:c=getBoxBinary(v[u][l])}b[4*m+0]=parseInt(c.substring(0,1));b[4*m+1]=parseInt(c.substring(1,2));b[4*m+2]=parseInt(c.substring(2,3));b[4*m+3]=parseInt(c.substring(3,4))}return b}function pPermute(a){var b=Array(32);b[0]=a[15];b[1]=a[6];b[2]=a[19];b[3]=a[20];b[4]=a[28];b[5]=a[11];b[6]=a[27];b[7]=a[16];b[8]=a[0];b[9]=a[14];b[10]=a[22];b[11]=a[25];b[12]=a[4];b[13]=a[17];b[14]=a[30];b[15]=a[9];b[16]=a[1];b[17]=a[7];b[18]=a[23];b[19]=a[13];b[20]=a[31];b[21]=a[26];b[22]=a[2];b[23]=a[8];b[24]=a[18];b[25]=a[12];b[26]=a[29];b[27]=a[5];b[28]=a[21];b[29]=a[10];b[30]=a[3];b[31]=a[24];return b}function finallyPermute(a){var b=Array(64);b[0]=a[39];b[1]=a[7];b[2]=a[47];b[3]=a[15];b[4]=a[55];b[5]=a[23];b[6]=a[63];b[7]=a[31];b[8]=a[38];b[9]=a[6];b[10]=a[46];b[11]=a[14];b[12]=a[54];b[13]=a[22];b[14]=a[62];b[15]=a[30];b[16]=a[37];b[17]=a[5];b[18]=a[45];b[19]=a[13];b[20]=a[53];b[21]=a[21];b[22]=a[61];b[23]=a[29];b[24]=a[36];b[25]=a[4];b[26]=a[44];b[27]=a[12];b[28]=a[52];b[29]=a[20];b[30]=a[60];b[31]=a[28];b[32]=a[35];b[33]=a[3];b[34]=a[43];b[35]=a[11];b[36]=a[51];b[37]=a[19];b[38]=a[59];b[39]=a[27];b[40]=a[34];b[41]=a[2];b[42]=a[42];b[43]=a[10];b[44]=a[50];b[45]=a[18];b[46]=a[58];b[47]=a[26];b[48]=a[33];b[49]=a[1];b[50]=a[41];b[51]=a[9];b[52]=a[49];b[53]=a[17];b[54]=a[57];b[55]=a[25];b[56]=a[32];b[57]=a[0];b[58]=a[40];b[59]=a[8];b[60]=a[48];b[61]=a[16];b[62]=a[56];b[63]=a[24];return b}function getBoxBinary(a){var b="";switch(a){case 0:b="0000";break;case 1:b="0001";break;case 2:b="0010";break;case 3:b="0011";break;case 4:b="0100";break;case 5:b="0101";break;case 6:b="0110";break;case 7:b="0111";break;case 8:b="1000";break;case 9:b="1001";break;case 10:b="1010";break;case 11:b="1011";break;case 12:b="1100";break;case 13:b="1101";break;case 14:b="1110";break;case 15:b="1111"}return b}function generateKeys(a){for(var b=Array(56),c=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],f=0;7>f;f++)for(j=0,k=7;8>j;j++,k--)b[8*f+j]=a[8*k+f];var f;for(f=0;16>f;f++){var h;for(j=0;j<d[f];j++){a=b[0];h=b[28];for(k=0;27>k;k++)b[k]=b[k+1],b[28+k]=b[29+k];b[27]=a;b[55]=h}a=Array(48);a[0]=b[13];a[1]=b[16];a[2]=b[10];a[3]=b[23];a[4]=b[0];a[5]=b[4];a[6]=b[2];a[7]=b[27];a[8]=b[14];a[9]=b[5];a[10]=b[20];a[11]=b[9];a[12]=b[22];a[13]=b[18];a[14]=b[11];a[15]=b[3];a[16]=b[25];a[17]=b[7];a[18]=b[15];a[19]=b[6];a[20]=b[26];a[21]=b[19];a[22]=b[12];a[23]=b[1];a[24]=b[40];a[25]=b[51];a[26]=b[30];a[27]=b[36];a[28]=b[46];a[29]=b[54];a[30]=b[29];a[31]=b[39];a[32]=b[50];a[33]=b[44];a[34]=b[32];a[35]=b[47];a[36]=b[43];a[37]=b[48];a[38]=b[38];a[39]=b[55];a[40]=b[33];a[41]=b[52];a[42]=b[45];a[43]=b[41];a[44]=b[49];a[45]=b[35];a[46]=b[28];a[47]=b[31];switch(f){case 0:for(m=0;48>m;m++)c[0][m]=a[m];break;case 1:for(m=0;48>m;m++)c[1][m]=a[m];break;case 2:for(m=0;48>m;m++)c[2][m]=a[m];break;case 3:for(m=0;48>m;m++)c[3][m]=a[m];break;case 4:for(m=0;48>m;m++)c[4][m]=a[m];break;case 5:for(m=0;48>m;m++)c[5][m]=a[m];break;case 6:for(m=0;48>m;m++)c[6][m]=a[m];break;case 7:for(m=0;48>m;m++)c[7][m]=a[m];break;case 8:for(m=0;48>m;m++)c[8][m]=a[m];break;case 9:for(m=0;48>m;m++)c[9][m]=a[m];break;case 10:for(m=0;48>m;m++)c[10][m]=a[m];break;case 11:for(m=0;48>m;m++)c[11][m]=a[m];break;case 12:for(m=0;48>m;m++)c[12][m]=a[m];break;case 13:for(m=0;48>m;m++)c[13][m]=a[m];break;case 14:for(m=0;48>m;m++)c[14][m]=a[m];break;case 15:for(m=0;48>m;m++)c[15][m]=a[m]}}return c};